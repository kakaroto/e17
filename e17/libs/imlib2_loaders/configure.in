dnl Process this file with autoconf to create configure.

AC_INIT(src/loader_xcf.c)
AM_INIT_AUTOMAKE(imlib2_loaders, 1.1.1)
AM_CONFIG_HEADER(config.h)

AC_C_BIGENDIAN	      

AC_LIBLTDL_CONVENIENCE

AC_PROG_CC
AM_PROG_CC_STDC
AC_C_CONST

AC_PROG_INSTALL
AC_PROG_MAKE_SET
AM_PROG_LIBTOOL

AC_PATH_X
AC_PATH_XTRA

AC_ARG_ENABLE(edb,
[  --disable-edb           disable building the edb loader],
[
   if test x$enableval = xno; then
      edb=no;
   fi
])

AC_ARG_ENABLE(eet,
[  --disable-eet           disable building the eet loader],
[
   if test x$enableval = xno; then
      eet=no;
   fi
])

AC_ARG_ENABLE(xcf,
[  --disable-xcf           disable building the xcf loader],
[
   if test x$enableval = xno; then
      xcf=no;
   fi
])

AC_PATH_GENERIC(imlib2, , ,
  AC_MSG_ERROR(Imlib2 not found))

if test x$edb != xno; then
  AC_PATH_GENERIC(edb, , , [
    AC_MSG_WARN([edb-config not found])
    edb=no])
fi

if test x$eet != xno; then
  AC_PATH_GENERIC(eet, , , [
    AC_MSG_WARN([eet-config not found])
    eet=no])
fi

AM_CONDITIONAL(EDB_LOADER, test x$edb != xno)
AM_CONDITIONAL(EET_LOADER, test x$eet != xno)
AM_CONDITIONAL(XCF_LOADER, test x$xcf != xno)

AC_OUTPUT([
Makefile
src/Makefile
debian/Makefile
imlib2_loaders.spec
])

echo -e "\nBuild summary:"
echo    "------------------------"
echo -n " XCF: "
if test x$xcf = xno ; then
   echo    "Disabled "
else
   echo    "Enabled "
fi   

echo -n " Edb: "
if test x$edb = xno; then
   echo    "Disabled "
else
   echo    "Enabled "
fi   

echo -n " Eet: "
if test x$eet = xno; then
   echo    "Disabled "
else
   echo    "Enabled "
fi   

echo -e "------------------------\n"
